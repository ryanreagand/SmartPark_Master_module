[env:esp32-s3-devkitc-1]
platform = espressif32
board = esp32-s3-devkitc-1
framework = arduino

; Serial Monitor Configuration
monitor_speed = 115200
monitor_filters = esp32_exception_decoder

; Upload Configuration
upload_speed = 921600

; Build flags
build_flags = 
    -DCORE_DEBUG_LEVEL=0
    -DBOARD_HAS_PSRAM
    -mfix-esp32-psram-cache-issue
    -D USER_SETUP_LOADED=1
    -D ST7796_DRIVER=1
    -D TFT_WIDTH=320
    -D TFT_HEIGHT=480
    
    ; Pin definitions
    -D TFT_MISO=2
    -D TFT_MOSI=11
    -D TFT_SCLK=12
    -D TFT_CS=10
    -D TFT_DC=8
    -D TFT_RST=9
    -D TFT_BL=13
    
    ; SPI settings
    -D SPI_FREQUENCY=20000000    ; Try slower speed first
    -D SPI_READ_FREQUENCY=10000000
    
    ; COLOR FIXES - ADD THESE:
    -D TFT_INVERSION_ON=1        ; Enable color inversion
    -D TFT_RGB_ORDER=TFT_BGR     ; Try BGR color order
    
    ; Fonts
    -D LOAD_GLCD=1
    -D LOAD_FONT2=1
    -D LOAD_FONT4=1
; Library dependencies
lib_deps = 
    BenoitBlanchon/ArduinoJson@^6.18.5
    knolleary/PubSubClient@^2.8
    bodmer/TFT_eSPI@^2.5.43
    https://github.com/PaulStoffregen/XPT2046_Touchscreen.git
    

; Partition scheme (optional - use if you need more space)
; board_build.partitions = huge_app.csv

; Flash size
board_build.flash_size = 16MB

; PSRAM settings for ESP32-S3-N16R8
board_build.arduino.memory_type = qio_opi
board_build.psram_type = opi

; USB CDC on boot (for native USB)
board_build.arduino.usb_cdc_on_boot = true
